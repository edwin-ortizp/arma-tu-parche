import{r as d,u as k,j as e,m as w,A as M}from"./framer-motion-B4_CJGXS.js";import{C}from"./card-QLcN9vVa.js";import{B as N}from"./PageHeader-BzyRTkiT.js";import{c as E,B as v,H as S}from"./index-YXPFkdHH.js";import{X as A}from"./x-CnQzEr8C.js";import{E as D}from"./EmptyState-Rjb2X_-t.js";import"./radix-ui-C_8bfTb2.js";import"./firebase-CKBzFk3f.js";import"./ui-utils-B2rm_Apj.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=E("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function L({date:s,onSwipe:x,isTop:o,zIndex:m,currentIndex:i,totalCount:n}){const[p,g]=d.useState(0),[c,h]=d.useState(0),f=k(),b=(r,t)=>{const l=t.velocity.x,j=t.offset.x;if(Math.abs(l)>=500||Math.abs(j)>=150){const y=j>0?"right":"left";g(y==="right"?1e3:-1e3),x(y,s.id)}else f.start({x:0,rotate:0}),h(0)},u=(r,t)=>{const l=t.offset.x*.1;h(l)};return e.jsx(w.div,{className:"absolute inset-0",style:{zIndex:m},drag:o?"x":!1,dragConstraints:{left:0,right:0},onDragEnd:b,onDrag:u,animate:f,initial:{scale:1-(3-m)*.03,y:(3-m)*5},exit:{x:p,rotate:p>0?30:-30,opacity:0},transition:{type:"spring",stiffness:300,damping:30},whileDrag:{scale:1.05,rotate:c},children:e.jsxs(C,{className:"w-full h-full overflow-hidden bg-white shadow-2xl border-0 relative",children:[o&&i&&n&&e.jsx("div",{className:"absolute top-2 sm:top-4 right-2 sm:right-4 z-50",children:e.jsx("div",{className:"bg-black/70 backdrop-blur-sm rounded-lg sm:rounded-xl px-2 sm:px-4 py-1 sm:py-2 shadow-xl border border-white/20",children:e.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-white",children:[i," / ",n]})})}),e.jsxs("div",{className:"relative h-2/5 bg-gray-200 overflow-hidden rounded-t-xl",children:[s.image.startsWith("http")||s.image.startsWith("/")?e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover",onError:r=>{const t=r.target;t.style.display="none";const a=t.parentElement;if(a){a.style.background=`linear-gradient(135deg, ${s.bgGradient||"from-purple-400 to-pink-400"})`;const l=document.createElement("div");l.className="absolute inset-0 flex items-center justify-center",l.innerHTML=`
                    <div class="text-white text-center">
                      <div class="text-6xl mb-2">🎯</div>
                      <div class="text-lg font-semibold">${s.category}</div>
                    </div>
                  `,a.appendChild(l)}}}):e.jsx("div",{className:`w-full h-full bg-gradient-to-br ${s.bgGradient||"from-blue-400 to-cyan-500"} flex flex-col items-center justify-center p-6`,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"text-6xl drop-shadow-lg filter mb-4",children:s.image}),e.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:s.title})]})}),(s.image.startsWith("http")||s.image.startsWith("/"))&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70"}),e.jsxs(w.div,{className:"absolute inset-0 flex items-center justify-center",animate:{opacity:Math.abs(c)>5?1:0},children:[c>5&&e.jsx("div",{className:"bg-green-500 text-white px-8 py-4 rounded-2xl text-2xl font-bold transform rotate-12 shadow-lg",children:"ME GUSTA"}),c<-5&&e.jsx("div",{className:"bg-red-500 text-white px-8 py-4 rounded-2xl text-2xl font-bold transform -rotate-12 shadow-lg",children:"NO GRACIAS"})]}),(s.image.startsWith("http")||s.image.startsWith("/"))&&e.jsx("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4",children:e.jsx(N,{className:"bg-black/70 text-white font-semibold backdrop-blur-sm border-white/30 rounded-lg sm:rounded-xl px-2 sm:px-4 py-1 sm:py-2 shadow-xl text-xs sm:text-sm",children:s.category})}),s.goodForToday&&e.jsx("div",{className:`absolute z-40 ${o&&i&&n?"top-12 sm:top-16 right-2 sm:right-4":"top-2 sm:top-4 right-2 sm:right-4"}`,children:e.jsx(N,{className:"bg-green-500 text-white font-semibold shadow-xl hover:bg-green-600 border border-green-400 rounded-lg sm:rounded-xl px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm",children:"¡Perfecto para hoy!"})})]}),e.jsxs("div",{className:"h-3/5 bg-white flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-center space-y-3 sm:space-y-4 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 text-center line-clamp-2",children:s.title}),e.jsx("p",{className:"text-base sm:text-lg text-gray-700 text-center line-clamp-2 sm:line-clamp-3 leading-relaxed",children:s.description}),s.explanation&&e.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-xs sm:text-sm text-blue-700 text-center line-clamp-2 leading-relaxed",children:["💡 ",s.explanation]})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2",children:[e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:["⏱️ ",s.duration]}),e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:["💰 ",s.cost]}),s.city&&e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium",children:["📍 ",s.city]})]})]}),o&&e.jsx("div",{className:"border-t border-gray-200 bg-white p-4 flex justify-center rounded-b-xl shadow-sm",children:e.jsxs("div",{className:"flex space-x-6",children:[e.jsx(v,{size:"lg",variant:"outline",className:"w-16 h-16 rounded-full border-2 border-red-300 bg-white hover:bg-red-50 group shadow-lg hover:shadow-xl transition-all hover:scale-105 active:scale-95",onClick:()=>x("left",s.id),children:e.jsx(A,{className:"w-7 h-7 text-red-500 group-hover:scale-110 transition-transform"})}),e.jsx(v,{size:"lg",className:"w-16 h-16 rounded-full bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 group shadow-lg hover:shadow-xl transition-all hover:scale-105 active:scale-95",onClick:()=>x("right",s.id),children:e.jsx(S,{className:"w-7 h-7 text-white group-hover:scale-110 transition-transform"})})]})})]})]})})}function V({dates:s,onLike:x,onPass:o,totalCount:m}){const[i,n]=d.useState(s),[p,g]=d.useState(!1),[c,h]=d.useState(!1);d.useEffect(()=>{n(s)},[s]);const f=async(r,t)=>{g(!0);try{if(r==="right"){const a=await x(t);a&&a.hasMatch&&a.isNewMatch&&(h(!0),setTimeout(()=>h(!1),3e3))}else await o(t);n(a=>a.filter(l=>l.id!==t))}catch(a){console.error("Error handling swipe:",a)}finally{g(!1)}},b=()=>{n(s)};if(i.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh] max-h-[600px] min-h-[400px] space-y-6",children:[e.jsx(D,{icon:e.jsx("span",{className:"text-4xl",children:"💕"}),title:"¡Has visto todos los planes!",description:"No hay más planes disponibles por ahora. Vuelve más tarde para descubrir nuevas actividades."}),e.jsxs(v,{onClick:b,variant:"outline",className:"mt-4",disabled:s.length===0,children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Ver de nuevo"]})]});const u=i.slice(0,3);return e.jsx("div",{className:"relative mx-auto w-full flex flex-col items-center",children:e.jsxs("div",{className:"relative w-full h-[80vh] max-h-[600px] min-h-[400px] flex items-center justify-center mb-6",children:[e.jsx(M,{children:u.map((r,t)=>e.jsx(L,{date:r,onSwipe:f,isTop:t===0,zIndex:u.length-t,currentIndex:s.length-i.length+1,totalCount:m||s.length},r.id))}),p&&e.jsx("div",{className:"absolute inset-0 bg-black/20 rounded-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-full p-3 shadow-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-primary"})})}),c&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"🎉"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"¡MATCH!"}),e.jsx("p",{className:"text-white text-lg",children:"¡A ambos les gusta este plan!"}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse delay-200"}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse delay-400"})]})})]})})]})})}export{V as TinderStack};
