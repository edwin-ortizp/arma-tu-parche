import{r as d,j as e}from"./framer-motion-B4_CJGXS.js";import{B as N,P as v}from"./PageHeader-BzyRTkiT.js";import C from"./index-CCsaoWv1.js";import{C as p,a as f,b as j,c as b}from"./card-QLcN9vVa.js";import{c as g,B as m,U as u,u as w}from"./index-YXPFkdHH.js";import{C as k}from"./check-B9dkFxUx.js";import{I as y}from"./input-Di7DpN6O.js";import{c as x}from"./constants-GwsSpMm0.js";import{A as P,a as A,u as S}from"./useConnections-tgce3Hgr.js";import"./radix-ui-C_8bfTb2.js";import"./firebase-CKBzFk3f.js";import"./ui-utils-B2rm_Apj.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=g("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=g("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=g("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function T({pin:t,onCopyPin:s}){const[n,r]=d.useState(!1),i=async()=>{await s()&&(r(!0),setTimeout(()=>r(!1),2e3))};return e.jsxs(p,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-indigo-200 shadow-sm",children:[e.jsx(f,{className:"pb-4",children:e.jsx(j,{className:"text-xl text-indigo-900",children:"Tu PIN"})}),e.jsxs(b,{children:[t&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-white rounded-xl px-6 py-4 border border-indigo-200 shadow-sm",children:e.jsx("p",{className:"font-mono text-3xl font-bold text-indigo-900 tracking-wider",children:t})}),e.jsx(m,{variant:"outline",size:"sm",onClick:i,className:"ml-4 border-indigo-200 text-indigo-700 hover:bg-indigo-50 px-4 py-2",children:n?e.jsx(k,{className:"w-5 h-5"}):e.jsx(I,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-base text-indigo-600 leading-relaxed",children:"Comparte este PIN con tus amigos para que puedan conectarse contigo"})]})]})}function q({onAddConnection:t}){const[s,n]=d.useState(""),[r,i]=d.useState(x[0]),[o,c]=d.useState(!1),a=async()=>{if(s.trim()){c(!0);try{await t(s,r),n(""),i(x[0]),alert("¡Conexión añadida exitosamente!")}catch(l){alert(l instanceof Error?l.message:"Error al agregar conexión")}finally{c(!1)}}};return e.jsxs(p,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[e.jsx(f,{className:"pb-3",children:e.jsxs(j,{className:"text-lg text-green-900 flex items-center",children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Agregar Amigo"]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{value:s,onChange:l=>n(l.target.value),placeholder:"Ingresa el PIN de tu amigo",className:"border-green-200 focus:border-green-400"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2",children:"¿Cómo describes esta relación?"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(l=>e.jsxs("label",{className:`flex items-center justify-center p-3 border-2 rounded-lg cursor-pointer transition-all ${r===l?"bg-green-100 border-green-500 text-green-800 shadow-sm":"bg-white border-green-200 hover:border-green-300 hover:bg-green-50 text-green-700"}`,children:[e.jsx("input",{type:"radio",name:"relation",value:l,checked:r===l,onChange:h=>i(h.target.value),className:"sr-only"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:l})]},l))})]}),e.jsx(m,{onClick:a,disabled:o||!s.trim(),className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600",children:o?"Agregando...":"Agregar Conexión"})]})})]})}function B({connections:t}){const[s,n]=d.useState(""),[r,i]=d.useState("all"),o=t.filter(a=>{const l=a.name.toLowerCase().includes(s.toLowerCase()),h=r==="all"||a.relation===r;return l&&h}),c=a=>{switch(a){case"pareja":return"from-rose-400 to-pink-500";case"amigos":return"from-blue-400 to-cyan-500";case"familia":return"from-green-400 to-emerald-500";case"solo":return"from-gray-400 to-slate-500";default:return"from-blue-400 to-cyan-500"}};return e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs(j,{className:"text-lg flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"Mis Conexiones",e.jsx(N,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:o.length})]})}),t.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(y,{placeholder:"Buscar amigos...",value:s,onChange:a=>n(a.target.value),className:"pl-10 h-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(m,{variant:r==="all"?"default":"outline",size:"sm",onClick:()=>i("all"),className:"h-8",children:"Todos"}),x.map(a=>e.jsx(m,{variant:r===a?"default":"outline",size:"sm",onClick:()=>i(a),className:"h-8 capitalize",children:a},a))]})]})]}),e.jsx(b,{children:t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aún no tienes conexiones"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"Agrega amigos usando su PIN para empezar a encontrar planes increíbles juntos"})]}):o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No hay conexiones que coincidan con los filtros"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{n(""),i("all")},className:"mt-3",children:"Limpiar filtros"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:o.map(a=>e.jsxs("div",{className:"flex flex-col items-center group",children:[e.jsx(P,{className:"h-16 w-16 ring-2 ring-white shadow-lg",children:e.jsx(A,{className:`bg-gradient-to-br ${c(a.relation||"")} text-white font-bold text-lg`,children:a.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 truncate w-20",children:a.name}),a.relation&&e.jsx(N,{variant:"outline",className:"text-xs mt-1 px-2 py-0.5 capitalize",style:{backgroundColor:a.relation==="pareja"?"#fee2e2":a.relation==="amigos"?"#dbeafe":a.relation==="familia"?"#dcfce7":"#e0e7ff",color:a.relation==="pareja"?"#dc2626":a.relation==="amigos"?"#2563eb":a.relation==="familia"?"#16a34a":"#4f46e5",borderColor:a.relation==="pareja"?"#fecaca":a.relation==="amigos"?"#bfdbfe":a.relation==="familia"?"#bbf7d0":"#c7d2fe"},children:a.relation})]})]},a.uid))})})]})}function R(){const{user:t}=w(),{connections:s,pin:n,loading:r,error:i,addConnection:o,removeConnection:c,copyPin:a}=S();return{user:t,connections:s,pin:n,loading:r,error:i,addConnection:o,removeConnection:c,copyPin:a}}function W(){const{user:t,connections:s,pin:n,loading:r,addConnection:i,copyPin:o}=R();return t?r?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(v,{title:"Mis Amigos",description:"Conecta con tus amigos para encontrar planes juntos",icon:e.jsx(u,{className:"w-5 h-5 text-white"}),badge:{text:`${s.length} ${s.length===1?"amigo":"amigos"}`,className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white"}}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(T,{pin:n,onCopyPin:o}),e.jsx(q,{onAddConnection:i})]}),e.jsx(B,{connections:s})]}):e.jsx(C,{})}export{W as default};
