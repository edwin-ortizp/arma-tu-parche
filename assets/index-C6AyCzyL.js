import{r as l,j as e}from"./framer-motion-B4_CJGXS.js";import{B as p,P as y}from"./PageHeader-Lihv4X5P.js";import b from"./index-BpYLA0jg.js";import{C as d,a as g,b as u,c as m,B as j}from"./button-CCKa5jUo.js";import{C}from"./check-D4YSFbia.js";import{c as f,U as N,u as v}from"./index-CxtCZa1v.js";import{I as w}from"./input-V1delrEd.js";import{S as P,a as k,b as A,c as I,d as S}from"./select-BUNPSNEw.js";import{r as h}from"./constants-DTA4gtYl.js";import{A as T,a as U,u as B}from"./useConnections-xNm_MLxY.js";import"./radix-ui-DTUURzEd.js";import"./firebase-CKBzFk3f.js";import"./ui-utils-BxIQ3qGg.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=f("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=f("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function L({pin:s,onCopyPin:a}){const[t,r]=l.useState(!1),n=async()=>{await a()&&(r(!0),setTimeout(()=>r(!1),2e3))};return e.jsxs(d,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-indigo-200 shadow-sm",children:[e.jsx(g,{className:"pb-4",children:e.jsx(u,{className:"text-xl text-indigo-900",children:"Tu PIN"})}),e.jsxs(m,{children:[s&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-white rounded-xl px-6 py-4 border border-indigo-200 shadow-sm",children:e.jsx("p",{className:"font-mono text-3xl font-bold text-indigo-900 tracking-wider",children:s})}),e.jsx(j,{variant:"outline",size:"sm",onClick:n,className:"ml-4 border-indigo-200 text-indigo-700 hover:bg-indigo-50 px-4 py-2",children:t?e.jsx(C,{className:"w-5 h-5"}):e.jsx(E,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-base text-indigo-600 leading-relaxed",children:"Comparte este PIN con tus amigos para que puedan conectarse contigo"})]})]})}function M({onAddConnection:s}){const[a,t]=l.useState(""),[r,n]=l.useState(h[0]),[o,c]=l.useState(!1),x=async()=>{if(a.trim()){c(!0);try{await s(a,r),t(""),n(h[0]),alert("¡Conexión añadida exitosamente!")}catch(i){alert(i instanceof Error?i.message:"Error al agregar conexión")}finally{c(!1)}}};return e.jsxs(d,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[e.jsx(g,{className:"pb-3",children:e.jsxs(u,{className:"text-lg text-green-900 flex items-center",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Agregar Amigo"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{value:a,onChange:i=>t(i.target.value),placeholder:"Ingresa el PIN de tu amigo",className:"border-green-200 focus:border-green-400"}),e.jsxs(P,{value:r,onValueChange:n,children:[e.jsx(k,{className:"h-10",children:e.jsx(A,{placeholder:"Tipo de vínculo"})}),e.jsx(I,{children:h.map(i=>e.jsx(S,{value:i,children:i},i))})]}),e.jsx(j,{onClick:x,disabled:o||!a.trim(),className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600",children:o?"Agregando...":"Agregar Conexión"})]})})]})}function z({connection:s,className:a=""}){return e.jsx(d,{className:`hover:shadow-md transition-shadow duration-200 ${a}`,children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"h-12 w-12",children:e.jsx(U,{className:"bg-gradient-to-br from-purple-400 to-pink-400 text-white font-semibold",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-foreground truncate",children:s.name}),s.relation&&e.jsx(p,{variant:"outline",className:"mt-1",children:s.relation})]})]})})})}function H({connections:s}){return e.jsxs(d,{children:[e.jsx(g,{children:e.jsxs(u,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{children:"Mis Conexiones"}),e.jsx(p,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:s.length})]})}),e.jsx(m,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Aún no tienes conexiones"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Agrega amigos usando su PIN para empezar a encontrar planes juntos"})]}):e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsx(z,{connection:a},a.uid))})})]})}function V(){const{user:s}=v(),{connections:a,pin:t,loading:r,error:n,addConnection:o,removeConnection:c,copyPin:x}=B();return{user:s,connections:a,pin:t,loading:r,error:n,addConnection:o,removeConnection:c,copyPin:x}}function _(){const{user:s,connections:a,pin:t,loading:r,addConnection:n,copyPin:o}=V();return s?r?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(y,{title:"Mis Amigos",description:"Conecta con tus amigos para encontrar planes juntos",icon:e.jsx(N,{className:"w-8 h-8 md:w-10 md:h-10 text-white"}),badge:{text:`${a.length} ${a.length===1?"amigo":"amigos"}`,className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white"}}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(L,{pin:t,onCopyPin:o}),e.jsx(M,{onAddConnection:n})]}),e.jsx(H,{connections:a})]}):e.jsx(b,{})}export{_ as default};
