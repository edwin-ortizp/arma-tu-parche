import{r as o,j as e}from"./framer-motion-B4_CJGXS.js";import{c as N,a as p,e as f,B as j,d as c}from"./index-DvEJBdLQ.js";import{k as P,e as g,d as l,u as I}from"./firebase-CKBzFk3f.js";import{C as d,c as m,a as H,b as M}from"./card-9B-dZafu.js";import O from"./index-C5AP6xfm.js";import{a as S}from"./constants-GwsSpMm0.js";import{P as U}from"./PageHeader-CJX3KL5r.js";import"./radix-ui-C_8bfTb2.js";import"./ui-utils-B2rm_Apj.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=N("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=N("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function F(){const s=p.currentUser,[n,y]=o.useState([]),[r,u]=o.useState([]);if(o.useEffect(()=>{(async()=>{if(!s)return;const a=(await g(l(c,"users",s.uid))).data(),C=(a==null?void 0:a.connections)||[],k=await Promise.all(C.map(async x=>{var h;const L=await g(l(c,"users",x));return{uid:x,name:((h=L.data())==null?void 0:h.displayName)||"Anon"}}));y(k),u((a==null?void 0:a.interests)||[])})()},[s]),!s)return e.jsx(O,{});const w=()=>P(p),v=S,b=async t=>{if(!s)return;const i=r.includes(t)?r.filter(a=>a!==t):[...r,t];u(i),await I(l(c,"users",s.uid),{interests:i})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(U,{title:"Mi Perfil",description:"Gestiona tu información y preferencias",icon:e.jsx(f,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"relative",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:"avatar",className:"w-12 h-12 rounded-full"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:s.displayName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}),n.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[n.length," ",n.length===1?"amigo":"amigos"]})]})})]})})}),e.jsxs(d,{children:[e.jsx(H,{children:e.jsx(M,{className:"text-lg",children:"Intereses"})}),e.jsx(m,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(t=>e.jsx(j,{type:"button",variant:r.includes(t)?"default":"outline",size:"sm",onClick:()=>b(t),children:t},t))})})]}),e.jsx(d,{className:"bg-gradient-to-br from-red-50 to-pink-50 border-red-200",children:e.jsx(m,{className:"py-6",children:e.jsxs(j,{onClick:w,variant:"destructive",className:"w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Cerrar Sesión"]})})})]})]})}export{F as default};
