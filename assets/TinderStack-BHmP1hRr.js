import{r as c,u as C,j as e,m as y,A as M}from"./framer-motion-B4_CJGXS.js";import{C as S,B as b}from"./button-CCKa5jUo.js";import{B as N}from"./PageHeader-Lihv4X5P.js";import{C as E,M as D}from"./map-pin-B0u_CyAy.js";import{c as w,H as k}from"./index-CxtCZa1v.js";import{X as A}from"./x-B7Ayx_S2.js";import{E as H}from"./EmptyState-DXYLOXNh.js";import"./radix-ui-DTUURzEd.js";import"./firebase-CKBzFk3f.js";import"./ui-utils-BxIQ3qGg.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=w("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=w("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function R({date:s,onSwipe:x,isTop:h,zIndex:n}){const[o,f]=c.useState(0),[i,p]=c.useState(0),d=C(),u=(l,t)=>{const r=t.velocity.x,j=t.offset.x;if(Math.abs(r)>=500||Math.abs(j)>=150){const v=j>0?"right":"left";f(v==="right"?1e3:-1e3),x(v,s.id)}else d.start({x:0,rotate:0}),p(0)},g=(l,t)=>{const r=t.offset.x*.1;p(r)},m=l=>{f(l==="right"?1e3:-1e3),x(l,s.id)};return e.jsx(y.div,{className:"absolute inset-0",style:{zIndex:n},drag:h?"x":!1,dragConstraints:{left:0,right:0},onDragEnd:u,onDrag:g,animate:d,initial:{scale:1-(3-n)*.05,y:(3-n)*10},exit:{x:o,rotate:o>0?30:-30,opacity:0},transition:{type:"spring",stiffness:300,damping:30},whileDrag:{scale:1.05,rotate:i},children:e.jsxs(S,{className:"w-full h-full overflow-hidden bg-white shadow-2xl border-0",children:[e.jsxs("div",{className:"relative h-3/5 bg-gray-200 overflow-hidden",children:[s.image.startsWith("http")||s.image.startsWith("/")?e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover",onError:l=>{const t=l.target;t.style.display="none";const a=t.parentElement;if(a){a.style.background=`linear-gradient(135deg, ${s.bgGradient||"from-purple-400 to-pink-400"})`;const r=document.createElement("div");r.className="absolute inset-0 flex items-center justify-center",r.innerHTML=`
                    <div class="text-white text-center">
                      <div class="text-6xl mb-2">üéØ</div>
                      <div class="text-lg font-semibold">${s.category}</div>
                    </div>
                  `,a.appendChild(r)}}}):e.jsx("div",{className:`w-full h-full bg-gradient-to-br ${s.bgGradient||"from-purple-400 to-pink-400"} flex items-center justify-center`,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"text-8xl mb-4 drop-shadow-lg filter",children:s.image}),e.jsx("div",{className:"text-xl font-semibold bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:s.category})]})}),(s.image.startsWith("http")||s.image.startsWith("/"))&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70"}),e.jsxs(y.div,{className:"absolute inset-0 flex items-center justify-center",animate:{opacity:Math.abs(i)>5?1:0},children:[i>5&&e.jsx("div",{className:"bg-green-500 text-white px-8 py-4 rounded-2xl text-2xl font-bold transform rotate-12 shadow-lg",children:"ME GUSTA"}),i<-5&&e.jsx("div",{className:"bg-red-500 text-white px-8 py-4 rounded-2xl text-2xl font-bold transform -rotate-12 shadow-lg",children:"NO GRACIAS"})]}),(s.image.startsWith("http")||s.image.startsWith("/"))&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(N,{className:"bg-white/90 text-gray-800 font-medium",children:s.category})}),s.goodForToday&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(N,{className:"bg-green-500 text-white font-medium shadow-lg",children:"¬°Perfecto para hoy!"})})]}),e.jsxs("div",{className:"h-2/5 p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3 mb-4",children:s.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.duration})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.cost})]}),s.city&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.city})]})]})]}),h&&e.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-4",children:[e.jsx(b,{size:"lg",variant:"outline",className:"w-14 h-14 rounded-full border-2 border-red-500 bg-white hover:bg-red-50 group",onClick:()=>m("left"),children:e.jsx(A,{className:"w-6 h-6 text-red-500 group-hover:scale-110 transition-transform"})}),e.jsx(b,{size:"lg",className:"w-14 h-14 rounded-full bg-green-500 hover:bg-green-600 group",onClick:()=>m("right"),children:e.jsx(k,{className:"w-6 h-6 text-white group-hover:scale-110 transition-transform"})})]})]})})}function F({dates:s,onLike:x,onPass:h}){const[n,o]=c.useState(s),[f,i]=c.useState(!1),[p,d]=c.useState(!1);c.useEffect(()=>{o(s)},[s]);const u=async(l,t)=>{i(!0);try{if(l==="right"){const a=await x(t);a&&a.hasMatch&&a.isNewMatch&&(d(!0),setTimeout(()=>d(!1),3e3))}else await h(t);o(a=>a.filter(r=>r.id!==t))}catch(a){console.error("Error handling swipe:",a)}finally{i(!1)}},g=()=>{o(s)};if(n.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] space-y-6",children:[e.jsx(H,{icon:e.jsx(k,{className:"w-12 h-12 text-pink-500"}),title:"¬°Has visto todos los planes!",description:"No hay m√°s planes disponibles por ahora. Vuelve m√°s tarde para descubrir nuevas actividades."}),e.jsxs(b,{onClick:g,variant:"outline",className:"mt-4",disabled:s.length===0,children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Ver de nuevo"]})]});const m=n.slice(0,3);return e.jsxs("div",{className:"relative mx-auto w-full max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl h-[600px] md:h-[700px] flex items-center justify-center",children:[e.jsx(M,{children:m.map((l,t)=>e.jsx(R,{date:l,onSwipe:u,isTop:t===0,zIndex:m.length-t},l.id))}),f&&e.jsx("div",{className:"absolute inset-0 bg-black/20 rounded-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-full p-3 shadow-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-primary"})})}),p&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"üéâ"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"¬°MATCH!"}),e.jsx("p",{className:"text-white text-lg",children:"¬°A ambos les gusta este plan!"}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse delay-200"}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse delay-400"})]})})]})}),e.jsx("div",{className:"absolute bottom-[-80px] left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Desliza ‚Üí para me gusta, ‚Üê para pasar"})})]})}export{F as TinderStack};
