import{r as d,u as M,j as e,m as y,A as E}from"./framer-motion-B4_CJGXS.js";import{C as S}from"./card-BlfsYPae.js";import{B as k}from"./PageHeader-DMY0rhfM.js";import{c as A,B as j,H as C}from"./index-DDKkWTPz.js";import{X as D}from"./x-H883-MYU.js";import{E as H}from"./EmptyState-CUUEHLXk.js";import"./radix-ui-C_8bfTb2.js";import"./firebase-CKBzFk3f.js";import"./ui-utils-B2rm_Apj.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=A("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function R({date:t,onSwipe:f,isTop:h,zIndex:m,currentIndex:n,totalCount:o}){const[u,x]=d.useState(0),[c,g]=d.useState(0),p=M(),v=(a,s)=>{const i=s.velocity.x,w=s.offset.x;if(Math.abs(i)>=500||Math.abs(w)>=150){const N=w>0?"right":"left";x(N==="right"?1e3:-1e3),f(N,t.id)}else p.start({x:0,rotate:0}),g(0)},b=(a,s)=>{const i=s.offset.x*.1;g(i)},l=a=>{x(a==="right"?1e3:-1e3),f(a,t.id)};return e.jsx(y.div,{className:"absolute inset-0",style:{zIndex:m},drag:h?"x":!1,dragConstraints:{left:0,right:0},onDragEnd:v,onDrag:b,animate:p,initial:{scale:1-(3-m)*.05,y:(3-m)*10},exit:{x:u,rotate:u>0?30:-30,opacity:0},transition:{type:"spring",stiffness:300,damping:30},whileDrag:{scale:1.05,rotate:c},children:e.jsxs(S,{className:"w-full h-full overflow-hidden bg-white shadow-2xl border-0 relative",children:[h&&n&&o&&e.jsx("div",{className:"absolute top-4 right-4 z-50",children:e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-full px-3 py-1 shadow-lg",children:e.jsxs("span",{className:"text-xs font-semibold text-white",children:[n," / ",o]})})}),e.jsxs("div",{className:"relative h-2/5 bg-gray-200 overflow-hidden rounded-t-xl",children:[t.image.startsWith("http")||t.image.startsWith("/")?e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover",onError:a=>{const s=a.target;s.style.display="none";const r=s.parentElement;if(r){r.style.background=`linear-gradient(135deg, ${t.bgGradient||"from-purple-400 to-pink-400"})`;const i=document.createElement("div");i.className="absolute inset-0 flex items-center justify-center",i.innerHTML=`
                    <div class="text-white text-center">
                      <div class="text-6xl mb-2">ðŸŽ¯</div>
                      <div class="text-lg font-semibold">${t.category}</div>
                    </div>
                  `,r.appendChild(i)}}}):e.jsx("div",{className:`w-full h-full bg-gradient-to-br ${t.bgGradient||"from-blue-400 to-cyan-500"} flex flex-col items-center justify-center p-6`,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"text-6xl drop-shadow-lg filter mb-4",children:t.image}),e.jsx("h2",{className:"text-2xl font-bold text-white drop-shadow-lg",children:t.title})]})}),(t.image.startsWith("http")||t.image.startsWith("/"))&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70"}),e.jsxs(y.div,{className:"absolute inset-0 flex items-center justify-center",animate:{opacity:Math.abs(c)>5?1:0},children:[c>5&&e.jsx("div",{className:"bg-green-500 text-white px-8 py-4 rounded-2xl text-2xl font-bold transform rotate-12 shadow-lg",children:"ME GUSTA"}),c<-5&&e.jsx("div",{className:"bg-red-500 text-white px-8 py-4 rounded-2xl text-2xl font-bold transform -rotate-12 shadow-lg",children:"NO GRACIAS"})]}),(t.image.startsWith("http")||t.image.startsWith("/"))&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(k,{className:"bg-black/70 text-white font-medium backdrop-blur-sm",children:t.category})}),t.goodForToday&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(k,{className:"bg-green-500 text-white font-medium shadow-lg",children:"Â¡Perfecto para hoy!"})})]}),e.jsxs("div",{className:"h-3/5 bg-white flex flex-col",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsx("p",{className:"text-lg text-gray-700 text-center line-clamp-4 leading-relaxed",children:t.description})}),h&&e.jsx("div",{className:"border-t border-gray-100 p-4 bg-gray-50/50",children:e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsx(j,{size:"lg",variant:"outline",className:"w-20 h-20 rounded-full border-4 border-red-300 bg-white hover:bg-red-50 group shadow-lg hover:shadow-xl transition-all hover:scale-105",onClick:()=>l("left"),children:e.jsx(D,{className:"w-12 h-12 text-red-500 group-hover:scale-110 transition-transform"})}),e.jsx(j,{size:"lg",className:"w-20 h-20 rounded-full bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 group shadow-lg hover:shadow-xl transition-all hover:scale-105",onClick:()=>l("right"),children:e.jsx(C,{className:"w-12 h-12 text-white group-hover:scale-110 transition-transform"})})]})})]})]})})}function _({dates:t,onLike:f,onPass:h,totalCount:m}){const[n,o]=d.useState(t),[u,x]=d.useState(!1),[c,g]=d.useState(!1);d.useEffect(()=>{o(t)},[t]);const p=async(l,a)=>{x(!0);try{if(l==="right"){const s=await f(a);s&&s.hasMatch&&s.isNewMatch&&(g(!0),setTimeout(()=>g(!1),3e3))}else await h(a);o(s=>s.filter(r=>r.id!==a))}catch(s){console.error("Error handling swipe:",s)}finally{x(!1)}},v=()=>{o(t)};if(n.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] space-y-6",children:[e.jsx(H,{icon:e.jsx(C,{className:"w-12 h-12 text-pink-500"}),title:"Â¡Has visto todos los planes!",description:"No hay mÃ¡s planes disponibles por ahora. Vuelve mÃ¡s tarde para descubrir nuevas actividades."}),e.jsxs(j,{onClick:v,variant:"outline",className:"mt-4",disabled:t.length===0,children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Ver de nuevo"]})]});const b=n.slice(0,3);return e.jsxs("div",{className:"relative mx-auto w-full max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl h-[600px] md:h-[700px] flex items-center justify-center",children:[e.jsx(E,{children:b.map((l,a)=>e.jsx(R,{date:l,onSwipe:p,isTop:a===0,zIndex:b.length-a,currentIndex:t.length-n.length+1,totalCount:m||t.length},l.id))}),u&&e.jsx("div",{className:"absolute inset-0 bg-black/20 rounded-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-full p-3 shadow-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-brand-primary"})})}),c&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Â¡MATCH!"}),e.jsx("p",{className:"text-white text-lg",children:"Â¡A ambos les gusta este plan!"}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse delay-200"}),e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse delay-400"})]})})]})})]})}export{_ as TinderStack};
